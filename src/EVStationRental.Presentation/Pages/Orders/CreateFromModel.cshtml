@page "{stationId:guid}/{modelId:guid}"
@model EVStationRental.Presentation.Pages.Orders.CreateFromModelModel
@{
    ViewData["Title"] = "Đặt theo mẫu xe";
}

<h2 class="mb-4">Đặt theo mẫu xe</h2>
<partial name="~/Pages/Shared/_Alerts.cshtml" />

<form method="post" asp-page-handler="Preview" class="mb-3">
    @Html.AntiForgeryToken()
    <div class="row g-3">
        <div class="col-md-4">
            <label class="form-label">Bắt đầu</label>
            <input class="form-control" asp-for="Input.StartTime" type="datetime-local" />
            <span class="text-danger" asp-validation-for="Input.StartTime"></span>
        </div>
        <div class="col-md-4">
            <label class="form-label">Kết thúc</label>
            <input class="form-control" asp-for="Input.EndTime" type="datetime-local" />
            <span class="text-danger" asp-validation-for="Input.EndTime"></span>
        </div>
        <div class="col-md-4">
            <label class="form-label">Mã khuyến mãi</label>
            <input class="form-control" asp-for="Input.PromotionCode" />
        </div>
        <div class="col-md-4">
            <label class="form-label">Thanh toán</label>
            <select class="form-select" asp-for="Input.PaymentMethod">
                <option value="WALLET">Ví nội bộ</option>
                <option value="VNPAY">VNPay</option>
                <option value="CASH">Tiền mặt</option>
            </select>
        </div>
    </div>
    <div class="mt-3 d-flex align-items-center gap-3 flex-wrap">
        <button class="btn btn-outline-secondary">Xem trạng thái</button>
        @if (Model.EstimatedPrice.HasValue && Model.EstimatedPrice.Value > 0)
        {
            <div>Giá dự kiến: <strong>@Model.EstimatedPrice.Value.ToString("n0") ₫</strong></div>
        }
        <div>Trạng thái: @(Model.SlotAvailable ? "Có xe" : "Hết xe")</div>
    </div>
</form>

<form method="post" asp-page-handler="Confirm">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Input.StartTime" />
    <input type="hidden" asp-for="Input.EndTime" />
    <input type="hidden" asp-for="Input.PromotionCode" />
    <input type="hidden" asp-for="Input.PaymentMethod" />
    <button class="btn btn-primary" @(Model.SlotAvailable ? "" : "disabled")>Xác nhận đặt</button>
</form>

<partial name="~/Pages/Shared/_ValidationScriptsPartial.cshtml" />
