@page
@using System
@using System.Linq
@model EVStationRental.Presentation.Pages.Homepage.HomeModel
@{
    ViewData["Title"] = "Trang chá»§";
    var vehicleImages = new[]
    {
        Url.Content("~/imgs/2025-volkswagen-id-buzz_100946039.jpg"),
        Url.Content("~/imgs/CR-Cars-InlineHero-We-Test-About-50-EVs-Every-Year-Here-Are-the-13-Best-Electric-Cars-2025-1124.webp"),
        Url.Content("~/imgs/Polestar-3.jpg"),
        Url.Content("~/imgs/usnpx-25lucidair-jmv-0709.jpg")
    };
    var featuredImages = vehicleImages.OrderBy(_ => Guid.NewGuid()).Take(4).ToList();
    var heroPrimary = featuredImages.FirstOrDefault() ?? vehicleImages.First();
    var heroSecondary = featuredImages.Skip(1).Take(2).ToList();
    var stats = new (string Value, string Label, string Description)[]
    {
        ("120+", "Tráº¡m Ä‘ang hoáº¡t Ä‘á»™ng", "Phá»§ sÃ³ng 21 tá»‰nh / thÃ nh cÃ¹ng chuáº©n CCS, Type-2."),
        ("850+", "Xe sáºµn sÃ ng", "Äáº£m báº£o kiá»ƒm Ä‘á»‹nh pin vÃ  báº£o hiá»ƒm tiÃªu chuáº©n."),
        ("15'", "Thá»§ tá»¥c nháº­n xe", "Quy trÃ¬nh sá»‘ hÃ³a, kÃ½ há»£p Ä‘á»“ng online."),
    };
    var features = new (string Icon, string Title, string Description)[]
    {
        ("ğŸ”Œ", "Báº£n Ä‘á»“ sáº¡c realtime", "Theo dÃµi cÃ´ng suáº¥t, tÃ¬nh tráº¡ng tá»«ng tráº¡m vÃ  tá»± Ä‘á»™ng Ä‘á»‹nh tuyáº¿n."),
        ("ğŸ§ ", "Gá»£i Ã½ thÃ´ng minh", "Thuáº­t toÃ¡n Ä‘á» xuáº¥t xe theo lá»‹ch sá»­ vÃ  nhu cáº§u hÃ nh trÃ¬nh."),
        ("ğŸ’³", "VÃ­ tÃ­ch há»£p", "Äá»“ng bá»™ vÃ­ ná»™i bá»™, tháº» tÃ­n dá»¥ng vÃ  hÃ³a Ä‘Æ¡n doanh nghiá»‡p."),
        ("ğŸ›Ÿ", "ChÄƒm sÃ³c 24/7", "ÄÆ°á»ng dÃ¢y há»— trá»£ ká»¹ thuáº­t, cá»©u há»™ pin vÃ  báº£o hiá»ƒm chuyáº¿n Ä‘i.")
    };
    var steps = new (string Title, string Description)[]
    {
        ("Chá»n tráº¡m & máº«u xe", "Bá»™ lá»c nÃ¢ng cao giÃºp báº¡n tÃ¬m xe phÃ¹ há»£p pháº¡m vi hoáº¡t Ä‘á»™ng."),
        ("Äáº·t lá»‹ch thÃ´ng minh", "Há»‡ thá»‘ng khÃ³a xe tá»± Ä‘á»™ng, giá»¯ xe tá»‘i Ä‘a 30 phÃºt."),
        ("Theo dÃµi & thanh toÃ¡n", "Má»i giao dá»‹ch Ä‘Æ°á»£c Ä‘á»“ng bá»™ vá»›i vÃ­ vÃ  trung tÃ¢m Ä‘iá»u phá»‘i.")
    };
    var testimonials = new (string Quote, string Author, string Role)[]
    {
        ("Dá»¯ liá»‡u realtime giÃºp Ä‘á»™i ngÅ© váº­n hÃ nh nhÃ¬n tháº¥y toÃ n bá»™ Ä‘á»™i xe vÃ  tráº¡m sáº¡c trong má»™t mÃ n hÃ¬nh.", "Tráº§n Há»¯u ThÃ¡i", "Ops Lead Â· EVista Logistics"),
        ("Quy trÃ¬nh thuÃª xe cá»±c nhanh, há»£p Ä‘á»“ng kÃ½ sá»‘, hÃ³a Ä‘Æ¡n vá» ngay sau hÃ nh trÃ¬nh.", "LÃª Gia My", "KhÃ¡ch hÃ ng doanh nghiá»‡p"),
        ("Dashboard cá»§a Admin giáº£m 40% thá»i gian pháº£n há»“i yÃªu cáº§u há»— trá»£ tá»« tÃ i xáº¿.", "Nguyá»…n Báº£o Anh", "Customer Success Â· E-Move")
    };
    var isAuthenticated = User.Identity?.IsAuthenticated ?? false;
}

<section class="page-card hero">
    <div class="row align-items-center g-4">
        <div class="col-lg-6">
            <p class="hero__eyebrow">Há»‡ sinh thÃ¡i thuÃª xe Ä‘iá»‡n</p>
            <h1 class="display-5 fw-bold mb-3">ThuÃª xe Ä‘iá»‡n nhanh, Ä‘á»“ng bá»™ dá»¯ liá»‡u vÃ  an toÃ n tuyá»‡t Ä‘á»‘i</h1>
            <p class="lead text-muted">Káº¿t ná»‘i khÃ¡ch hÃ ng vá»›i máº¡ng lÆ°á»›i tráº¡m sáº¡c &amp; xe Ä‘iá»‡n trÃªn toÃ n há»‡ thá»‘ng. Tá»‘i Æ°u váº­n hÃ nh vá»›i Dashboard realtime, cáº£nh bÃ¡o pin vÃ  tá»± Ä‘á»™ng hÃ³a há»£p Ä‘á»“ng.</p>
            <div class="hero__actions mt-4">
                <a class="btn btn-primary btn-pill btn-lg" asp-page="/Vehicles/Browse">KhÃ¡m phÃ¡ xe</a>
                <a class="btn btn-outline btn-pill btn-lg" asp-page="/Stations/Browse">Xem tráº¡m gáº§n báº¡n</a>
            </div>
            <div class="hero__stats">
                @foreach (var stat in stats)
                {
                    <div class="hero-stat">
                        <div class="hero-stat__value">@stat.Value</div>
                        <div class="hero-stat__label">@stat.Label</div>
                    </div>
                }
            </div>
        </div>
        <div class="col-lg-6 hero__visual">
            <div class="hero-preview">
                <div class="hero-preview__main">
                    <img src="@heroPrimary" alt="Máº«u xe Ä‘iá»‡n ná»•i báº­t" loading="lazy" />
                </div>
                <div class="hero-preview__badge">ÄÃ¡nh giÃ¡ 4.9 â­</div>
                <div class="hero-preview__stack">
                    <div class="floating-card">
                        <small>ÄÆ¡n hoÃ n táº¥t</small>
                        <strong>8.2K+</strong>
                        <span class="text-muted small">/ nÄƒm</span>
                    </div>
                    <div class="floating-card">
                        <small>Thá»i gian nháº­n xe</small>
                        <strong>15'</strong>
                        <span class="text-muted small">tá»‘i Ä‘a</span>
                    </div>
                </div>
            </div>
            @if (heroSecondary.Any())
            {
                <div class="d-flex gap-3 mt-4">
                    @foreach (var image in heroSecondary)
                    {
                        <div class="flex-fill rounded-4 overflow-hidden shadow-sm border border-light-subtle">
                            <img src="@image" alt="EV preview" class="w-100" style="height:120px;object-fit:cover;" loading="lazy" />
                        </div>
                    }
                </div>
            }
            <div class="hero-highlight mt-4">
                @if (!isAuthenticated)
                {
                    <p class="text-uppercase text-muted small mb-1">Báº¯t Ä‘áº§u ngay</p>
                    <h5 class="mb-2 text-white">ÄÄƒng nháº­p hoáº·c táº¡o tÃ i khoáº£n</h5>
                    <p class="text-white-50 mb-3">Giá»¯ lá»‹ch sá»­ chuyáº¿n Ä‘i, lÆ°u phÆ°Æ¡ng thá»©c thanh toÃ¡n vÃ  Ä‘á»“ng bá»™ vÃ­ Ä‘iá»‡n tá»­ cá»§a báº¡n.</p>
                    <div class="hero__actions">
                        <a class="btn btn-primary btn-pill flex-fill" asp-page="/Auth/Login">ÄÄƒng nháº­p</a>
                        <a class="btn btn-outline btn-pill text-white border-light flex-fill" asp-page="/Auth/Register">ÄÄƒng kÃ½</a>
                    </div>
                }
                else
                {
                    <p class="text-uppercase text-muted small mb-1">Xin chÃ o, @Model.DisplayName</p>
                    <h5 class="mb-2 text-white">Tiáº¿p tá»¥c hÃ nh trÃ¬nh cá»§a báº¡n</h5>
                    <p class="text-white-50 mb-3">Xem tráº¡ng thÃ¡i Ä‘Æ¡n hiá»‡n táº¡i, quáº£n lÃ½ vÃ­ vÃ  khÃ¡m phÃ¡ máº«u xe má»›i.</p>
                    <div class="hero__actions">
                        <a class="btn btn-primary btn-pill" asp-page="/Orders/My">Theo dÃµi Ä‘Æ¡n</a>
                        <a class="btn btn-outline btn-pill text-white border-light" asp-page="/Wallet/History">VÃ­ cá»§a tÃ´i</a>
                        <a class="btn btn-outline btn-pill text-white border-light" asp-page="/Vehicles/Browse">KhÃ¡m phÃ¡ xe</a>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<div class="home-divider"></div>

<section class="page-section glass-card">
    <div class="section-heading">
        <span class="section-heading__eyebrow">Realtime Control Center</span>
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h2 class="section-heading__title">BÃ¡m sÃ¡t Ä‘á»™i xe &amp; tráº¡m sáº¡c trong má»™t báº£ng Ä‘iá»u khiá»ƒn</h2>
                <p class="section-heading__subtitle">Má»i dá»¯ liá»‡u hÃ nh trÃ¬nh, tráº¡ng thÃ¡i pin vÃ  há»£p Ä‘á»“ng luÃ´n Ä‘Æ°á»£c Ä‘á»“ng bá»™ tá»©c thÃ¬.</p>
            </div>
            <a class="btn btn-outline btn-pill" asp-page="/Admin/Index">Xem Dashboard Admin</a>
        </div>
    </div>
    <div class="stats-row">
        @foreach (var stat in stats)
        {
            <article class="stats-pill">
                <strong>@stat.Value</strong>
                <p class="mb-1 fw-semibold">@stat.Label</p>
                <p class="mb-0 text-muted small">@stat.Description</p>
            </article>
        }
    </div>
</section>

<section class="page-section card-panel">
    <div class="section-heading">
        <span class="section-heading__eyebrow">Tráº£i nghiá»‡m Ä‘á»“ng nháº¥t</span>
        <h2 class="section-heading__title">Má»™t ná»n táº£ng â€“ nhiá»u ká»‹ch báº£n khai thÃ¡c</h2>
        <p class="section-heading__subtitle">á»¨ng dá»¥ng khÃ¡ch hÃ ng, quáº£n trá»‹ viÃªn vÃ  Ä‘á»‘i tÃ¡c Ä‘á»u sá»­ dá»¥ng chung ngÃ´n ngá»¯ thiáº¿t káº¿, tá»‘i Æ°u hiá»‡u suáº¥t truy cáº­p.</p>
    </div>
    <div class="feature-grid">
        @foreach (var feature in features)
        {
            <article class="feature-card h-100">
                <div class="feature-card__icon">@feature.Icon</div>
                <h5 class="mb-2">@feature.Title</h5>
                <p class="text-muted mb-0">@feature.Description</p>
            </article>
        }
    </div>
</section>

<section class="page-section page-card">
    <div class="section-heading">
        <span class="section-heading__eyebrow">3 bÆ°á»›c hoÃ n táº¥t</span>
        <h2 class="section-heading__title">Äáº·t xe Ä‘iá»‡n chá»‰ trong vÃ i phÃºt</h2>
        <p class="section-heading__subtitle">ChÃºng tÃ´i tá»± Ä‘á»™ng hÃ³a xÃ¡c thá»±c, há»£p Ä‘á»“ng vÃ  thanh toÃ¡n â€“ báº¡n chá»‰ cáº§n chá»n xe.</p>
    </div>
    <div class="steps-grid">
        @for (var i = 0; i < steps.Length; i++)
        {
            var step = steps[i];
            <article class="step-card">
                <div class="step-card__number">@(i + 1)</div>
                <h5 class="mb-2">@step.Title</h5>
                <p class="text-muted mb-0">@step.Description</p>
            </article>
        }
    </div>
</section>

<section class="page-section page-card vehicle-showcase">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
        <div>
            <p class="eyebrow mb-1">Máº«u xe tiÃªu biá»ƒu</p>
            <h4 class="mb-1">Sáºµn sÃ ng cho má»i hÃ nh trÃ¬nh</h4>
            <small class="text-muted">Nhá»¯ng máº«u EV phá»• biáº¿n Ä‘Æ°á»£c báº£o dÆ°á»¡ng Ä‘á»‹nh ká»³ tá»«ng 1.000km.</small>
        </div>
        <a class="btn btn-outline btn-pill" asp-page="/Vehicles/Browse">Xem táº¥t cáº£</a>
    </div>
    <div class="row g-4">
        @foreach (var image in featuredImages)
        {
            <div class="col-md-3 col-sm-6">
                <div class="vehicle-card h-100">
                    <div class="vehicle-thumb">
                        <img src="@image" alt="Electric vehicle" loading="lazy" />
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-1">EV Station Rental</p>
                        <h5 class="mb-2">Máº«u xe tiÃªu chuáº©n</h5>
                        <p class="small text-muted mb-3">Pin 80kWh Â· Sáº¡c nhanh 120kW Â· Táº§m hoáº¡t Ä‘á»™ng 420km.</p>
                        <a class="btn btn-primary btn-pill w-100" asp-page="/Stations/Browse">Äáº·t ngay</a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>

<section class="page-section glass-card">
    <div class="section-heading">
        <span class="section-heading__eyebrow">KhÃ¡ch hÃ ng nÃ³i gÃ¬</span>
        <h2 class="section-heading__title">Tin tÆ°á»Ÿng bá»Ÿi Ä‘á»™i xe, doanh nghiá»‡p vÃ  ngÆ°á»i dÃ¹ng cÃ¡ nhÃ¢n</h2>
    </div>
    <div class="testimonial-grid">
        @foreach (var testimonial in testimonials)
        {
            <article class="testimonial-card">
                <p class="testimonial-card__quote">â€œ@testimonial.Quoteâ€</p>
                <p class="testimonial-card__author mb-0">@testimonial.Author</p>
                <small class="text-muted">@testimonial.Role</small>
            </article>
        }
    </div>
</section>

<section class="page-card cta-banner text-white">
    <div class="d-flex flex-column flex-lg-row gap-4 align-items-start align-items-lg-center">
        <div class="flex-fill">
            <p class="eyebrow text-white-50 mb-2">Sáºµn sÃ ng tÄƒng tá»‘c?</p>
            <h3 class="mb-3">Biáº¿n má»i chuyáº¿n Ä‘i thÃ nh tráº£i nghiá»‡m Ä‘iá»‡n hÃ³a Ä‘Ã¡ng nhá»›</h3>
            <p class="text-white-50 mb-0">Táº¡o tÃ i khoáº£n Ä‘á»ƒ Ä‘áº·t xe, quáº£n lÃ½ vÃ­ vÃ  theo dÃµi toÃ n bá»™ hÃ nh trÃ¬nh trong má»™t ná»n táº£ng thá»‘ng nháº¥t.</p>
        </div>
        <div class="cta-banner__actions">
            <a class="btn btn-primary btn-pill btn-lg" asp-page="/Vehicles/Browse">Báº¯t Ä‘áº§u thuÃª xe</a>
            <a class="btn btn-outline btn-pill btn-lg text-white border-light" asp-page="/Feedback/My">Chia sáº» nhu cáº§u</a>
        </div>
    </div>
</section>
